//kagenou
require("../../config");const fs=require("fs");const path=require("path");const DATABASE_PATH=path.join(__dirname,"../database.json");const loadDatabase=()=>{try{if(!fs.existsSync(DATABASE_PATH)){fs.writeFileSync(DATABASE_PATH,JSON.stringify({users:{},chats:{}},null,2));}return JSON.parse(fs.readFileSync(DATABASE_PATH,"utf-8"));}catch(error){console.error("❌ Error loading database:",error);return{users:{},chats:{},game:{},settings:{},others:{},sticker:{}};}};const saveDatabase=()=>{try{fs.writeFileSync(DATABASE_PATH,JSON.stringify(global.db,null,2));}catch(error){console.error("❌ Error saving database:",error);}};global.db=loadDatabase();setInterval(saveDatabase,30*1000);function parseInterval(){const timeUnits={detik:1000,menit:60000,jam:3600000,hari:86400000};const regex=/(\d+)(detik|menit|jam|hari)/;const match=global.resetlimit.match(regex);if(match){const value=parseInt(match[1]);const unit=match[2];if(timeUnits[unit]){return value*timeUnits[unit];}}return 0;}async function sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms));}module.exports={sleep,parseInterval,loadDatabase,saveDatabase};